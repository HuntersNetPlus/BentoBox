// üéØ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø LOTTIE –ü–û–î–õ–û–ñ–ö–ò
let lottiePromoBase = null;

document.addEventListener('DOMContentLoaded', () => {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Lottie-–ø–æ–¥–ª–æ–∂–∫—É
  const lottieContainer = document.getElementById('lottiePromoBase');
  if (lottieContainer) {
    lottiePromoBase = lottie.loadAnimation({
      container: lottieContainer,
      renderer: 'svg',
      loop: true,
      autoplay: false,
      path: 'https://raw.githubusercontent.com/HuntersNetPlus/BentoBox/main/Rendt.json'
    });
  }
  
  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  const promoVideo = document.getElementById('promoVideo');
  if (promoVideo) {
    promoVideo.pause();
    promoVideo.currentTime = 0;
  }
});

// –¢–∞–π–º–µ—Ä –ø—Ä–æ–º–æ–∫–æ–¥–∞ (15 —Å–µ–∫—É–Ω–¥)
function startPromoTimer() {
  promoTimer = setTimeout(() => {
    if (!promoDisintegrated) {
      disintegratePromo();
    }
  }, 15000);
}

üóëÔ∏è –ß–¢–û –£–î–ê–õ–ò–¢–¨:
–ù–∞–π–¥–∏ –í–°–ï —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–¥–µ –∏ –£–î–ê–õ–ò –ò–• (–æ–Ω–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è):
javascript// üéØ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø LOTTIE –ü–û–î–õ–û–ñ–ö–ò
let lottiePromoBase = null;

document.addEventListener('DOMContentLoaded', () => {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Lottie-–ø–æ–¥–ª–æ–∂–∫—É
  const lottieContainer = document.getElementById('lottiePromoBase');
  if (lottieContainer) {
    lottiePromoBase = lottie.loadAnimation({
      container: lottieContainer,
      renderer: 'svg',
      loop: true,
      autoplay: false, // –∑–∞–ø—É—Å—Ç–∏–º –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
      path: 'https://—Ç–≤–æ—è-—Å—Å—ã–ª–∫–∞-–Ω–∞-lottie.json' // üëà –ó–ê–ú–ï–ù–ò –ù–ê –°–í–û–Æ –°–°–´–õ–ö–£!
    });
  }
  
  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  const promoVideo = document.getElementById('promoVideo');
  if (promoVideo) {
    promoVideo.pause();
    promoVideo.currentTime = 0;
  }
});
```

–≠—Ç–æ—Ç –±–ª–æ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è **–î–í–ê –†–ê–ó–ê** ‚Äî —É–¥–∞–ª–∏ **–í–¢–û–†–û–ô** (–∫–æ—Ç–æ—Ä—ã–π –≤–Ω–∏–∑—É, –ø–æ—Å–ª–µ –±–ª–æ–∫–∞ —Å `disintegratePromo()`).

---

## üìù –ò–¢–û–ì–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –°–ö–†–ò–ü–¢–ê:
```
<script>
const loader = ...
let promoTimer = null;
...

function showPromo() { ... }
function hidePromo() { ... }

// üéØ –û–î–ò–ù –†–ê–ó –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø LOTTIE
let lottiePromoBase = null;
document.addEventListener('DOMContentLoaded', () => { ... });

function startPromoTimer() { ... }
function disintegratePromo() { ... }
function copyPromoCode() { ... }

// –í–°–Å –û–°–¢–ê–õ–¨–ù–û–ï...
window.addEventListener("load", () => { ... });
</script>
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è! –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) ‚Äî –µ—Å–ª–∏ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –æ—à–∏–±–æ–∫ –Ω–µ –±—É–¥–µ—Ç.–ü—Ä–∏—à–ª–∏ –º–Ω–µ –ø–æ–ª–Ω—ã–π script –ø–ª–∏–∑31 –¥–µ–∫.–î–µ—Ä–∂–∏ –ø–æ–ª–Ω—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π <script>:
javascript<script>

const loader = document.getElementById("loader");
const promoOverlay = document.getElementById("promoOverlay");
const promoCard = document.getElementById("promoCard");
const cakeScreen = document.getElementById("cakeScreen");
const cakeDescription = document.getElementById("cakeDescription");
const orderBtn = document.getElementById("orderBtn");

let promoTimer = null;
let promoDisintegrated = false;

// –õ–æ–∞–¥–µ—Ä
function showLoader(){ loader.classList.add("active"); }
function hideLoader(){ loader.classList.remove("active"); }

// –ü—Ä–æ–º–æ–∫–æ–¥
function showPromo(){ 
  promoOverlay.classList.add("active"); 
}

function hidePromo(){ 
  clearTimeout(promoTimer);
  promoOverlay.classList.remove("active");
  
  // üéØ –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú LOTTIE-–ü–û–î–õ–û–ñ–ö–£
  if (lottiePromoBase) {
    lottiePromoBase.stop();
  }
}

// üéØ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø LOTTIE –ü–û–î–õ–û–ñ–ö–ò
let lottiePromoBase = null;

document.addEventListener('DOMContentLoaded', () => {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Lottie-–ø–æ–¥–ª–æ–∂–∫—É
  const lottieContainer = document.getElementById('lottiePromoBase');
  if (lottieContainer) {
    lottiePromoBase = lottie.loadAnimation({
      container: lottieContainer,
      renderer: 'svg',
      loop: true,
      autoplay: false,
      path: 'https://raw.githubusercontent.com/HuntersNetPlus/BentoBox/main/Rendt.json'
    });
  }
  
  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  const promoVideo = document.getElementById('promoVideo');
  if (promoVideo) {
    promoVideo.pause();
    promoVideo.currentTime = 0;
  }
});

// –¢–∞–π–º–µ—Ä –ø—Ä–æ–º–æ–∫–æ–¥–∞ (15 —Å–µ–∫—É–Ω–¥)
function startPromoTimer() {
  promoTimer = setTimeout(() => {
    if (!promoDisintegrated) {
      disintegratePromo();
    }
  }, 15000);
}

// –≠—Ñ—Ñ–µ–∫—Ç —Ä–∞—Å–ø–∞–¥–∞ –Ω–∞ —á–∞—Å—Ç–∏—Ü—ã (–∫–∞–∫ –≥–æ—Ä—è—â–∞—è –±—É–º–∞–≥–∞)
function disintegratePromo() {
  promoDisintegrated = true;
  
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const rect = promoCard.getBoundingClientRect();
  
  // –°–æ–∑–¥–∞—ë–º —á–∞—Å—Ç–∏—Ü—ã
  const particles = [];
  const particleSize = 2;
  const totalDuration = 2000;
  const burnDuration = 1300;
  const eraserDuration = 2500;
  
  // –¢—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç –∏ –µ–≥–æ –æ—Ç—Ç–µ–Ω–∫–∏
  const greenShades = [
    '#1a4d2e', '#2a6d4e', '#1d3a22', '#24502f', 
    '#163920', '#0f2818', '#1e5a38', '#2d7a4f'
  ];
  
  const maxDistance = Math.sqrt(rect.width * rect.width + rect.height * rect.height);
  const speedScale = rect.width / 512;
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è –≤—Å–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
  for (let y = 0; y < rect.height; y += particleSize) {
    for (let x = 0; x < rect.width; x += particleSize) {
      if (Math.random() > 0.5) continue;
      
      const distanceFromBottomRight = Math.sqrt(
        Math.pow(rect.width - x, 2) + Math.pow(rect.height - y, 2)
      );
      
      const normalizedDistance = distanceFromBottomRight / maxDistance;
      
      particles.push({
        x: rect.left + x,
        y: rect.top + y,
        size: Math.random() < 0.5 ? 1 : 2,
        color: greenShades[Math.floor(Math.random() * greenShades.length)],
        speedX: -(Math.random() * 2.5 + 1.5) * speedScale,
        speedY: -(Math.random() * 2.5 + 0.5) * speedScale,
        opacity: 0,
        burnDelay: normalizedDistance * burnDuration,
        active: false
      });
    }
  }
  
  let startTime = Date.now();
  
  function generateSoftEraser(progress) {
    const radius = progress * maxDistance * 1.4;
    
    return `linear-gradient(
      -45deg,
      transparent 0%,
      transparent ${radius}px,
      rgba(0,0,0,0.3) ${radius + 10}px,
      rgba(0,0,0,0.7) ${radius + 20}px,
      black ${radius + 30}px
    )`;
  }
  
  // –ê–Ω–∏–º–∞—Ü–∏—è
  function animate() {
    const elapsed = Date.now() - startTime;
    const burnProgress = Math.min(elapsed / eraserDuration, 1);
    
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    if (burnProgress < 1) {
      promoCard.style.maskImage = generateSoftEraser(burnProgress);
      promoCard.style.webkitMaskImage = generateSoftEraser(burnProgress);
    } else {
      promoCard.style.opacity = '0';
    }
    
    let allGone = true;
    
    particles.forEach(p => {
      if (!p.active && elapsed >= p.burnDelay) {
        p.active = true;
        p.opacity = 1;
      }
      
      if (p.active) {
        const particleAge = elapsed - p.burnDelay;
        
        if (particleAge < 800 && p.opacity > 0) {
          allGone = false;
          
          ctx.globalAlpha = p.opacity;
          ctx.fillStyle = p.color;
          ctx.fillRect(p.x, p.y, p.size, p.size);
          
          p.x += p.speedX;
          p.y += p.speedY;
          p.speedX -= 0.001 * speedScale;
          p.speedY -= 0.001 * speedScale;
          
          p.opacity -= 0.015;
        }
      } else {
        allGone = false;
      }
    });
    
    if (!allGone || elapsed < totalDuration) {
      requestAnimationFrame(animate);
    } else {
      canvas.style.display = 'none';
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      hidePromo();
      
      setTimeout(() => {
        promoCard.style.maskImage = 'none';
        promoCard.style.webkitMaskImage = 'none';
        promoCard.style.opacity = '1';
      }, 500);
    }
  }
  
  canvas.style.display = 'block';
  animate();
}

// –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
function copyPromoCode() {
  const promoCodeEl = document.getElementById("promoCode");
  const code = promoCodeEl.textContent;
  
  clearTimeout(promoTimer);
  
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(code).then(() => {
      showCopyFeedback();
    }).catch(() => {
      fallbackCopyTextToClipboard(code);
    });
  } else {
    fallbackCopyTextToClipboard(code);
  }
}

// Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
function fallbackCopyTextToClipboard(text) {
  const textArea = document.createElement("textarea");
  textArea.value = text;
  textArea.style.position = "fixed";
  textArea.style.left = "-999999px";
  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();
  
  try {
    document.execCommand('copy');
    showCopyFeedback();
  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:', err);
  }
  
  document.body.removeChild(textArea);
}

// –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
function showCopyFeedback() {
  const promoCodeEl = document.getElementById("promoCode");
  const originalText = promoCodeEl.textContent;
  
  promoCodeEl.classList.add("copied");
  promoCodeEl.textContent = "–ø—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ ‚úì";
  
  setTimeout(() => {
    promoCodeEl.textContent = originalText;
    promoCodeEl.classList.remove("copied");
    hidePromo();
  }, 2000);
}

// –ö–ª–∏–∫ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–≤–µ—Ä–ª–µ–π
promoOverlay.addEventListener('click', () => {
  clearTimeout(promoTimer);
  hidePromo();
});

// –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
window.addEventListener("load", () => {
  window.scrollTo(0, 0);
  setTimeout(() => {
    hideLoader();
    showPromo();
    
    // üéØ –ó–ê–ü–£–°–ö–ê–ï–ú LOTTIE-–ü–û–î–õ–û–ñ–ö–£
    if (lottiePromoBase) {
      lottiePromoBase.play();
    }

    // üéØ –ó–ê–ü–£–°–ö–ê–ï–ú –í–ò–î–ï–û
    const promoVideo = document.getElementById('promoVideo');
    if (promoVideo) {
      promoVideo.play().catch(err => {
        console.log('–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω:', err);
      });
    }
    
    startPromoTimer();
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
    setTimeout(() => {
      document.querySelectorAll('.stat-card').forEach((card, index) => {
        setTimeout(() => {
          card.classList.add('visible');
        }, index * 150);
      });
    }, 300);
  }, 1000);
});

// –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
function openCatalog(){
  showLoader();
  setTimeout(()=>{
    document.getElementById("mainScreen").classList.remove("active");
    document.getElementById("catalogScreen").classList.add("active");
    window.scrollTo(0, 0);
    hideLoader();
  },500);
}
